<html><head>

    <title>新建商品</title>
    <meta  charset="UTF-8">
    <link rel="stylesheet" href="__PUBLIC__/Admin/css/common.css">
    <link rel="stylesheet" href="__PUBLIC__/Admin/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="__PUBLIC__/Admin/css/jeDate-test.css">
    <link type="text/css" rel="stylesheet" href="__PUBLIC__/Admin/css/jedate.css">
    <script src="__PUBLIC__/Admin/js/jquery-2.1.0.js"></script>
    <script src="__PUBLIC__/Admin/js/jquery.js"></script>
    <script src="__PUBLIC__/Admin/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.jedate.js"></script>
    <style>
        .form-horizontal .form-group{
            margin-right:0;
            margin-left:0;
        }
        .wenzi{margin-top:8px}
        .priceNum{margin-left:-55px}
        .sureOrder,.cycleData{
            display: flex;flex-direction: row;max-width: 700px;justify-content: flex-start;flex-wrap: wrap;
        }
        .sureOrderItem{
            margin-left: 5px;
            background-color:#E6E6E6;
            border-redis:2px;
            min-width: 50px;
            height: 28px;
            margin-right: 15px;
            margin-bottom: 15px;
            padding: 0 10px;
            font-size: 14px;
            line-height: 28px;
            margin-left:15px;
        }
        .groupActive{
            background-color:#646464;
            color:#ffffff
        }
        .weekTime{
            padding-right:10px;
            margin-left:14px;
            margin-top:5px;
            margin-bottom:10px
        }
        #notBooked{
            display: flex;
            flex-direction: row;
            max-width: 700px;
            justify-content: flex-start;
            flex-wrap: wrap;
        }
        .selectItem {
            margin-left: 15px;
            background-color:#E6E6E6;
            min-width: 50px;
            min-height: 28px;
            margin-right: 15px;
            margin-bottom: 15px;
            padding: 0 10px;
            display: flex;
            flex-direction: row;
            font-size: 14px;
            line-height: 28px;
        }
        .selectItem span {
            cursor: pointer;
            padding-left: 10px;
            font-size: 26px;
            color: #446C94;
            font-weight: 900;
            line-height: 24px;
            display: block;
        }
    </style>
</head>
<body>
<ol class="breadcrumb">
    <li><a href="#">产品管理</a></li>
    <li><a href="#">产品列表</a></li>
    <li><a href="#">商品列表</a></li>
    <li class="active">新建商品</li>
</ol>
<div class="container row" style="background-color:white;padding-top:20px">
    <form action="#" method="post" class="form-horizontal">
        <div class="form-group">
            <label for="" class="col-sm-2 control-label">*商品名称</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" name="name" id="name" placeholder="输入产品名称,24字以内 ">
            </div>
        </div>


        <div class="form-group">
            <label for="" class="col-sm-2 control-label">*服务类型</label>
            <div class="col-sm-4">
                <select name="type" class="form-control" id="serviceType" >
                    <option value="1" selected>上门服务</option>
                    <option value="2">到店服务</option>
                    <option value="3">在线咨询</option>
                    <option value="4">快递商品</option>
                    <option value="5">其它服务</option>
                </select>
            </div>
        </div>

<!-- 到家服务信息-->
        <div id="serviceTimeInfo">
            <div class="form-group" id="bookedType">
                <label for="" class="col-sm-2 control-label">*是否选择服务时间</label>
                <div class="col-sm-2" style="margin-top:7px;">
                    <input  type="radio"  name="service-time-select-radio" class="bookedTimeSelected" value="1">
                    <span>不选择时间</span>
                </div>
                <div class="col-sm-2" style="margin-top:7px;margin-left: -50px">
                    <input type="radio" checked name="service-time-select-radio" class="bookedTimeSelected" value="2" >
                    <span>选择时间</span>
                </div>
            </div>
            <div class="bookedTime">
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">*提前预约条件</label>
                    <div class="col-sm-2" style="margin-top:7px;">
                        <input type="radio" checked name="timeTypeBooked"  id="guDing" class="service-time-select" value="1">
                        <span>按固定时间计算</span>
                    </div>
                    <div class="col-sm-2" style="margin-top:7px;margin-left: -50px">
                        <input type="radio" name="timeTypeBooked" id="ziRanRi" class="service-time-select" value="2">
                        <span>按自然日计算</span>
                    </div>
                </div>
                <div id="yuYueType">
                    <div class="form-group">
                        <label for="" class="col-sm-2 control-label"></label>
                        <div class="col-sm-1 wenzi" style="margin-right:10px">提前</div>
                        <div class="col-sm-2 priceNum">
                            <input type="text" class="form-control"   name="" placeholder="" id="">
                        </div>
                        <div class="col-sm-1 wenzi">小时;</div>
                    </div>

                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">*预约日期范围</label>
                    <div class="col-sm-1 wenzi" style="margin-right:10px">可预约</div>
                    <div class="col-sm-2 priceNum">
                        <input type="text" class="form-control"   name="" placeholder="" id="">
                    </div>
                    <div class="col-sm-2 wenzi">天内的服务;</div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">*不可预约的日期</label>
                    <div class="col-sm-2 ">
                        <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#gridSystemModal" style="width:80px;background:#1AB394;border:0">添加</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label"></label>
                     <div id="notBooked">
<!--                         <div class="item selectItem" data-value="111">
                             <div><div>周一，周二，周三，周四</div><div>2018/08/10-2018/09/12</div></div>
                             <span class="delButton">×</span>
                         </div>
                         <div class="item selectItem" data-value="111">周一，周二，周三，周四<span class="delButton">×</span></div>
                         <div class="item selectItem" data-value="111">周一，周二，周三，周四<span class="delButton">×</span></div>-->
                      </div>
                </div>
                <!--模态框开始-->
                <div class="modal fade" id="gridSystemModal" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content" style="margin-top:50%">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">添加不可预约日期</h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <label for="" class="col-sm-2 control-label" style="color:#A1A1A1">周期</label>
                                    <div class="cycleData">
                                        <div class="weekTime">
                                            <input type="checkbox" name="shijianduan" class="weekends" value="1" id="">
                                            <span class="">周一</span>
                                        </div>
                                        <div class="weekTime">
                                            <input type="checkbox" name="shijianduan" class="weekends" value="2" id="">
                                            <span class="">周二</span>
                                        </div>
                                        <div class="weekTime">
                                            <input type="checkbox" name="shijianduan" class="weekends" value="3" id="">
                                            <span class="">周三</span>
                                        </div>
                                        <div class="weekTime">
                                            <input type="checkbox" name="shijianduan" class="weekends" value="4" id="">
                                            <span class="">周四</span>
                                        </div>
                                        <div class="weekTime">
                                            <input type="checkbox" name="shijianduan" class="weekends" value="5" id="">
                                            <span class="">周五</span>
                                        </div>
                                        <div class="weekTime">
                                            <input type="checkbox" name="shijianduan" class="weekends" value="6" id="">
                                            <span class="">周六</span>
                                        </div>
                                        <div class="weekTime">
                                            <input type="checkbox" name="shijianduan" class="weekends" value="" id="0">
                                            <span class="">周日</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin-top:10px;">
                                    <label for="" class="col-sm-2 control-label" style="color:#A1A1A1">选择时间</label>
                                    <div class="col-sm-3">
                                        <input type="text" class="form-control" id="servicestart"  name="" placeholder="选择开始时间">
                                    </div>
                                    <div class="col-sm-2 control-label" style="text-align: center;margin-left: -40px;margin-right: -40px;">
                                        至
                                    </div>
                                    <div class="col-sm-3">
                                        <input type="text" class="form-control" id="serviceend"  name="" placeholder="选择结束时间">
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                                <button type="button" class="btn btn-primary" id="noservicebutton">确定</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">*下单是否可选人员</label>
                    <!--<div class="col-sm-2">-->
                        <!--<select name="type" class="form-control" id="" >-->
                            <!--<option value="1">分配到人</option>-->
                            <!--<option value="2">分配到供应商</option>-->
                        <!--</select>-->
                    <!--</div>-->
                    <div class="col-sm-2">
                        <select name="type" class="form-control" id="" >
                            <option value="1">下单选择服务人员</option>
                            <option value="2">供应商分配服务人员</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">*可接单的员工组</label>
                    <div class="sureOrder">
                        <div class="sureOrderItem  groupActive">默认组</div>
                        <div class="sureOrderItem">推拿</div>
                        <div class="sureOrderItem">中医</div>
                    </div>
                </div>

        </div>
        <div class="form-group">
            <label for="" class="col-sm-2 control-label">*收费方式</label>
            <div class="col-sm-4">
                <select name="paystyle" class="form-control" id="paystyle">
                    <option value="1">实际价格</option>
                    <option value="2">定金</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="" class="col-sm-2 control-label">*规格</label>
            <div class="col-sm-4">
                <select name="spec" class="form-control" id="spec">
                    <option value="0">无规格</option>
                    <option value="1">有规格</option>
                </select>
            </div>
        </div>
        <div id="content">

        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10" id="addbutton">
            </div>
        </div>
        <!---------------------------------填单信息---------------------------------->
        <div class="form-group  onecon element1" data-num='1'>
            <label for="" class="col-sm-2 control-label">*下单信息</label>
            <div class="col-sm-10" style="border: 1px solid #000;height: 50px;padding-top: 7px">
                <label for="" class=" col-sm-1 control-label">名称</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control name" name="name" id="" disabled value="姓名">
                </div>
                <div class="col-sm-2">
                    <select name="type" class="form-control selecttype" disabled>
                        <option value="1" selected >文本</option>
                        <option value="2">筛选项</option>
                        <option value="3"  >上传图片</option>
                        <option value="4" >地址</option>
                    </select>
                </div>
                <div class="col-sm-2" >
                    <select name="" class="form-control require" disabled>
                        <option value="0">是否必填</option>
                        <option value="1" selected>必填</option>
                        <option value="2">非必填</option>
                    </select>
                </div>
                <div class="col-sm-2">
                    <select name="" class="form-control numtype">
                        <option value="0">填写份数</option>
                        <option value="1">1份</option>
                        <option value="2">多份</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="form-group  onecon element2" data-num='2'>
            <label for="" class="col-sm-2 control-label"></label>
            <div class="col-sm-10" style="border: 1px solid #000;height: 50px;padding-top: 7px">
                <label for="" class=" col-sm-1 control-label">名称</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control name" name="" id=""  disabled value="手机号">
                </div>
                <div class="col-sm-2">
                    <select name="type" class="form-control selecttype" disabled>
                        <option value="1" selected >文本</option>
                        <option value="2">筛选项</option>
                        <option value="3"  >上传图片</option>
                        <option value="4" >地址</option>
                    </select>
                </div>
                <div class="col-sm-2">
                    <select name="" class="form-control require" disabled>
                        <option value="0">是否必填</option>
                        <option value="1" selected>必填</option>
                        <option value="2">非必填</option>
                    </select>
                </div>
                <div class="col-sm-2">
                    <select name="" class="form-control numtype">
                        <option value="0">填写份数</option>
                        <option value="1">1份</option>
                        <option value="2">多份</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="form-group  onecon element2" data-num='2'>
            <label for="" class="col-sm-2 control-label"></label>
            <div class="col-sm-10" style="border: 1px solid #000;height: 50px;padding-top: 7px">
                <label for="" class=" col-sm-1 control-label">名称</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control name" name="" id=""  disabled value="服务地址">
                </div>
                <div class="col-sm-2">
                    <select name="type" class="form-control selecttype" disabled>
                        <option value="1" selected >地址</option>
                        <option value="2">筛选项</option>
                        <option value="3"  >上传图片</option>
                        <option value="4" >地址</option>
                    </select>
                </div>
                <div class="col-sm-2">
                    <select name="" class="form-control require" disabled>
                        <option value="0">是否必填</option>
                        <option value="1" selected>必填</option>
                        <option value="2">非必填</option>
                    </select>
                </div>
                <div class="col-sm-2">
                    <select name="" class="form-control numtype">
                        <option value="0">填写份数</option>
                        <option value="1" selected>1份</option>
                        <option value="2">多份</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="" class="col-sm-2 control-label"></label>
            <div>
                <button type="button" name="" id="typeButton" class="btn btn-primary" style="width:120px;background:#777;border:0">自定义下单信息</button>
            </div>
        </div>
        <div id="selectCondition">
        </div>

        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="button" name="submit" id="surebtn" class="btn btn-primary" style="width:120px;margin-top:50px;background:#1AB394;border:0">保存</button>
            </div>
        </div>
        {__TOKEN__}
    </form>
</div>
<script>

     /*时间插件操作*/
     //获取当前日期时间
     var newDate = new Date();
     Date.prototype.format = function(format) {
         var date = {
             "M+": this.getMonth() + 1,
             "d+": this.getDate(),
             "h+": this.getHours(),
             "m+": this.getMinutes(),
             "s+": this.getSeconds(),
             "q+": Math.floor((this.getMonth() + 3) / 3),
             "S+": this.getMilliseconds()
         };
         if (/(y+)/i.test(format)) {
             format = format.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length));
         }
         for (var k in date) {
             if (new RegExp("(" + k + ")").test(format)) {
                 format = format.replace(RegExp.$1, RegExp.$1.length == 1
                     ? date[k] : ("00" + date[k]).substr(("" + date[k]).length));
             }
         }
         return format;
     }

     var nowdate = newDate.format('yyyy-MM-dd h:m:s');
     //日期插件
     $("#servicestart").jeDate({
         format: "YYYY-MM-DD",
         minDate:nowdate
     })
     $("#serviceend").jeDate({
         format: "YYYY-MM-DD",
         minDate:nowdate
     })

     //选择不可服务时间
     $('#noservicebutton').click(function () {
        var starttime = $("#servicestart").val();
        var endtime = $("#serviceend").val();
        var date = '';
        var weekends = '';
        var weekids = '';
        var istrue = true;
        $('.weekends:checked').each(function () {
            weekends += $(this).parent().find('span').text()+',';
            weekids += $(this).val()+';'
        })
         console.log(weekends)
         if (weekends) weekends = weekends.substr(0,weekends.length-1);
         if (weekids) weekids = weekids.substr(0,weekids.length-1);
         if (starttime && endtime) {
             starttime = starttime.split('-');
             starttime = starttime[0]+'/'+starttime[1]+'/'+starttime[2];
             endtime = endtime.split('-');
             endtime = endtime[0]+'/'+endtime[1]+'/'+endtime[2];
            date = starttime+'-'+endtime;
         } else if (starttime) {
             istrue = false;
             alert('选择结束时间');
         } else if (endtime) {
             istrue = false;
             alert('选择开始时间');
         }
         var html = '';
         var temp = '';
         if (istrue) {
            if (weekends && date) {
                temp = date+'|'+weekids;
                html = '<div class="item selectItem" data-value="'+temp+'"><div><div>'+date+'</div><div>'+weekends+'</div></div><span class="delButton">×</span></div>';
            } else if (weekends) {
                temp = '|'+weekids;
                html = '<div class="item selectItem" data-value="'+temp+'">'+weekends+'<span class="delButton">×</span></div>';
            } else if (date) {
                temp = date+'|';
                html = '<div class="item selectItem" data-value="'+temp+'">'+date+'<span class="delButton">×</span></div>';
            }
         }
         $("#notBooked").append(html);
     })


    //可接单的员工租操作
      $(".sureOrderItem").click(function(){
          // $('.sureOrderItem').removeClass('groupActive');
          if(!$(this).hasClass('groupActive')){
              $(this).addClass('groupActive');
          }else{
              $(this).removeClass('groupActive');
          }
      })

    //提前预约条件操作
     function ziRanRi(){
         var str='';
         str='<div class="form-group">\n' +
             '                        <label for="" class="col-sm-2 control-label"></label>\n' +
             '                        <div class="col-sm-1 wenzi" style="margin-right:10px">提前</div>\n' +
             '                        <div class="col-sm-2 priceNum">\n' +
             '                            <input type="text" class="form-control"   name="" placeholder="" id="">\n' +
             '                        </div>\n' +
             '                        <div class="col-sm-1 wenzi">天，</div>\n' +
             '                        <span><select  style="width:60px;height:30px" id="tiqianyuding-day-val-time"></select>&nbsp;&nbsp;几点前;</span>\n' +
             '                    </div>';
         return str;
     }
     function addZiRanRI(){
          var str='';
          str=ziRanRi();
         $("#yuYueType").html(str);
     }

     $("#ziRanRi").click(function(){
         if (!$(this).hasClass('haschecked')) {
             $(this).addClass('haschecked');
             $("#guDing").removeClass('haschecked');
             $("#yuYueType").html('');
             addZiRanRI();
             select_hour_render();
         }

     })

    function guDing(){
        var str='';
        str='<div class="form-group">\n' +
            '                        <label for="" class="col-sm-2 control-label"></label>\n' +
            '                        <div class="col-sm-1 wenzi" style="margin-right:10px">提前</div>\n' +
            '                        <div class="col-sm-2 priceNum">\n' +
            '                            <input type="text" class="form-control"   name="" placeholder="" id="">\n' +
            '                        </div>\n' +
            '                        <div class="col-sm-1 wenzi">小时;</div>\n' +
            '                    </div>';
        return str;
    }
    function addGuDing(){
        var str='';
        str=guDing();
        $("#yuYueType").html(str);
    }

    $("#guDing").click(function(){
        if (!$(this).hasClass('haschecked')) {
            $(this).addClass('haschecked');
            $("#ziRanRi").removeClass('haschecked');
            $("#yuYueType").html('');
            addGuDing();
        }

    })


    //24点时间选择
    function select_hour_render(){
        var str=' <option value="%value">%hour</option>';
        for (let i = 24; i >=0; i --) {
            let hourstr;
            if (i < 10) {
                hourstr = '0' + i;
            } else {
                hourstr = i;
            }
            var temp = hourstr;
            let hour_str = str.replace('%hour',temp + ':00');
            hour_str = hour_str.replace('%value',temp + ':00');
            $('#tiqianyuding-day-val-time').append(hour_str);
        }
    }
    // select_hour_render();


    /*到家服务操作*/
    $('#serviceType').change(function(){
        var serviceType=$('#serviceType option:selected').val();
        if(serviceType==1){
            $('#serviceTimeInfo').show();
        }else{
            $('#serviceTimeInfo').hide();
        }
    })

   /* 预定条件选择*/
    $('.bookedTimeSelected').click(function(){
        var bookType=$('.bookedTimeSelected:checked').val();
        console.log(bookType);
        if(bookType==2){
            $('.bookedTime').show();
        }else{
            $('.bookedTime').hide();
        }
    })



    function init() {
        var str='            <div class="form-group col-sm-10 onespec" style="border:1px solid #000;float: right;padding-bottom: 8px">\n' +
            '\n' +
            '                <div style="margin-top:10px ">\n' +
            '                    <label class="col-sm-2 control-label" >*规格名称</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text" class="form-control  specname" name="specname "  disabled placeholder="20字以内" >\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1 control-label" >*单价</label>\n' +
            '                    <div class="col-sm-5">\n' +
            '                        <input type="text" name="price" class="form-control price">\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1" style="color:#000;width: 30px">元</label>\n' +
            '                </div>\n' +
            '\n' +
            '\n' +
            '                <div style="margin-top:50px ">\n' +
            '                    <label class="col-sm-2 control-label" >*库存</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text" name="nums" class="form-control nums" >\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1 control-label" >*限购</label>\n' +
            '                    <div class="col-sm-2">\n' +
            '                        <select name="limittype" class="form-control limittype"   >\n' +
            '                            <option value="1" selected>不限购</option>\n' +
            '                            <option value="2">按用户限购</option>\n' +
            '                            <option value="3">按订单限购</option>\n' +
            '                        </select>\n' +
            '                    </div>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text" name="limitnum" class="form-control limitnum" disabled="disabled">\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1" style="color:#000;width: 30px">份</label>\n' +
            '                </div>\n' +
            '\n' +
            '                <div style="margin-top:90px ;margin-bottom:130px">\n' +
            '                    <label for="" class="col-sm-2 control-label" >*状态</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <select name="status" class="form-control status" >\n' +
            '                            <option value="1">上线</option>\n' +
            '                            <option value="2">下线</option>\n' +
            '                        </select>\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1 control-label" >市场价</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text" class="form-control orginprice" name="orginprice">\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1" style="color:#000;width: 30px">元</label>\n' +
            '                </div>\n' +
            '                <div>\n' +
            '                    <label class="col-sm-2 control-label">*起订份数</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text" class="form-control minnum"  value="1" name="minnum " placeholder="" >\n' +
            '                    </div>\n' +
            '                   <label class="col-sm-2 control-label" style="text-align:left">*服务时长</label>\n' +
            '                    <div class="col-sm-3" style="margin-left:-75px;">\n' +
            '                        <input type="text" class="form-control  "  value="1" name=" " placeholder="" >\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1" style="color:#000;">小时</label>\n' +
            '                </div>\n' +
            '                <div class="col-sm-11" style="margin-top:5px">\n' +
            '                    <label class="col-sm-2 control-label" >*tips</label>\n' +
            '                    <div class="col-sm-10">\n' +
            '                        <input type="text" class="form-control tips" name=" "   placeholder="30字以内" >\n' +
            '                    </div>\n' +
            '                </div>\n' +
            '            </div>';
        $("#content").html(str);
        $("#addbutton").html('<button type="button" name="add" id="add" disabled class="btn btn-primary" style="width:80px;background:#777;border:0">添加规格</button>\n');
    }
    init();
    //新增一个有规格
    function onestr() {
        var goodtype = $("#type").val();
        var paystyle = $("#paystyle").val();
        var spec = $("#spec").val();
        var str='            <div class="form-group col-sm-10 onespec" style="border:1px solid #000;float: right;padding-bottom: 8px">\n' +
            '\n' +
            '                <div style="margin-top:10px ">\n' +
            '                    <label class="col-sm-2 control-label" >*规格名称</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text" class="form-control specname "  name="specname " '+(spec==0?'disabled':'')+'   placeholder="20字以内" >\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1 control-label" >*单价</label>\n' +
            '                    <div class="col-sm-5">\n' +
            '                        <input type="text" name="price" class="form-control price"   >\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1" style="color:#000;width: 30px">元</label>\n' +
            '                </div>\n' +
            '\n' +
            '\n' +
            '                <div style="margin-top:50px ">\n' +
            '                    <label class="col-sm-2 control-label" >*库存</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text" class="form-control nums" name="nums">\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1 control-label" >*限购</label>\n' +
            '                    <div class="col-sm-2">\n' +
            '                        <select name="limittype" class="form-control limittype" >\n' +
            '                            <option value="1"  >不限购</option>\n' +
            '                            <option value="2">按用户限购</option>\n' +
            '                            <option value="3">按订单限购</option>\n' +
            '                        </select>\n' +
            '                    </div>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text"  name="limitnum"class="form-control limitnum" disabled>\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1" style="color:#000;width: 30px">份</label>\n' +
            '                </div>\n' +
            '\n' +
            '                <div style="margin-top:90px ;margin-bottom:130px">\n' +
            '                    <label for="" class="col-sm-2 control-label" >*状态</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <select name="status" class="form-control status" >\n' +
            '                            <option value="1">上线</option>\n' +
            '                            <option value="2">下线</option>\n' +
            '                        </select>\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1 control-label" >市场价</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text" class="form-control orginprice" name="orginprice">\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1" style="color:#000;width: 30px">元</label>\n' +
            '                </div>\n' +
            '                <div>\n' +
            '                    <label class="col-sm-2 control-label" >*起订份数</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text" class="form-control  minnum"  value="1" name="minnum " placeholder="" >\n' +
            '                    </div>\n' +
            '                   <label class="col-sm-2 control-label" style="text-align:left">*服务时长</label>\n' +
            '                    <div class="col-sm-3" style="margin-left:-75px;">\n' +
            '                        <input type="text" class="form-control  "  value="1" name=" " placeholder="" >\n' +
            '                    </div>\n' +
            '                    <label class="col-sm-1" style="color:#000;">小时</label>\n' +
            '                </div>\n' +
            '                <div class="col-sm-11" style="margin-top:5px">\n' +
            '                    <label class="col-sm-2 control-label" >*tips</label>\n' +
            '                    <div class="col-sm-10">\n' +
            '                        <input type="text" class="form-control tips" name=" "   placeholder="30字以内" >\n' +
            '                    </div>\n' +
            '                </div>\n' +
            '                <img src="__PUBLIC__/Admin/images/u847.png"  class="del" alt="点击删除" style="float: right;position: absolute;right: -30px;height: 30px;top:-1px;cursor: pointer" />\n' +
            '            </div>';
        return str;
    }

    function createOneSpec() {
        var str = '';
        str=onestr();
        console.log(str);
        $("#content").append(str);
    }
    //无规格
    function nospec() {
        $('.specname').prop('disabled', true);
        $("#add").prop('disabled',true);
        $("#content div").remove();
        var str = onestr();
        $("#content").html(str);
    }

    //有规格
    function spec1() {
        $('.specname').prop('disabled', false);
        $("#add").prop('disabled',false);
    }
    $("#add").click(function () {
        createOneSpec();
    })


    //删除一个规格
    $('#content').on('click','.del',function () {
        $(this).parent().remove();
    })

    $("#spec").change(function () {
        var spec = $(this).val();
        var str = '';
        console.log(spec);
        if(spec==1){
            spec1();
        }else {
            init();
        }
    })

    //限购操作
    $("#content").on('click','.limittype',function () {
        var type =$(this).val();
        if (type ==1) {
            $(this).parents('.onespec').find('.limitnum').val('').attr('disabled',true);
        } else {
            $(this).parents('.onespec').find('.limitnum').attr('disabled',false);

        }
    })

    function getFormatData() {
        var str = '';
        var type = '';
        var name = '';
        var require = '';
        var numtype = '';
        var options = '';
        var pics = '';
        var isright = 1;
        var j =1;
        $('.onecon').each(function () {
            type = $(this).find('.selecttype').val();
            name = $(this).find('.name').val();
            require = $(this).find('.require').val();
            numtype = $(this).find('.numtype').val();
            if (name.length>4) {
                alert('名称最多4个字');
                isright = 0;
                return false;
            }
            if (j==1 || j ==2) {
                if (!parseInt(numtype)) {
                    alert('请选择下单信息中:'+name+'的份数');
                    isright = 0;
                    return false;
                }
            } else{
                if (!name) {
                    alert('请填写自定义下单中的名称');
                    isright = 0;
                    return false;
                } else if (!parseInt(require)){
                    alert('请选择自定义下单中必填类型');
                    isright = 0;
                    return false;
                } else if (!parseInt(numtype))
                {
                    alert('请选择自定义下单中份数类型');
                    isright = 0;
                    return false;
                }
            }
            if (type == 1){                 //文本
                str+=name+','+type+','+require+','+numtype+',,'+j;
            } else if (type == 2) {
                options = '';
                var isoptionright = 1;
                $(this).find('.oneselect input').each(function () {
                    if ($(this).val().length>8) {
                        alert('选项最多8个字');
                        isoptionright = 0;
                        return false;
                    } else if($(this).val().length == 0 ){
                        alert('请填写选项');
                        isoptionright = 0;
                        return false;
                    }
                    options+=$(this).val()+';';
                })
                if (!isoptionright) {
                    isright = 0;
                    return false;
                }
                options = options.substr(0,options.length-1);
                str+=name+','+type+','+require+','+numtype+','+options+','+j;
            } else  if (type == 3) {
                pics = '';
                var ispicright = 1;
                $(this).find('.pics input').each(function () {
                    if ($(this).val().length == 0 ) {
                        alert('请填写图片名称');
                        ispicright = 0;
                        return false;
                    }
                    pics += $(this).val()+';';
                })
                if (!ispicright) {
                    isright = 0;
                    return false;
                }
                pics = pics.substr(0, pics.length-1);
                str+=name+','+type+','+require+','+numtype+','+pics+','+j;
            } else if (type == 4) {
                str+=name+','+type+','+require+','+numtype+',,'+j;
            } else {
                isright = 0;
                return false;
            }
            str +='|';
            j++;
        })
        if (isright) {
            str= str.substr(0,str.length-1);
        } else {
            str = '';
        }
        return str;
    }

    //提交添加商品
    $("#surebtn").click(function () {
        var productid = "{$Think.get.productid}";
        console.log(productid);
        var getblen = function(info) {
            if (info == null) return 0;
            if (typeof info != "string"){
                info += "";
            }
            return info.replace(/[^\x00-\xff]/g,"01").length/2;
        }
        var name = $("#name").val();

        if(name==''){
            issubmit = 0;
            alert("请输入商品名称")
            return false;
        }
        if(getblen(name)>24){
            issubmit = 0;
            alert("商品名称最多输入24字");
            return false;
        }

        var type = $("#type").val();
        var paystyle = $("#paystyle").val();
        var spec = $("#spec").val();
        var specinfo = '';
        var issubmit = 1;
        var token = $("input[name='__hash__']").val();
        $("#content .onespec").each(function () {
            var specname = $(this).find('.specname').val();
            var price = $(this).find('.price').val();
            var nums = $(this).find('.nums').val();
            var limittype = $(this).find('.limittype').val();
            var limitnum = $(this).find('.limitnum').val();
            var status = $(this).find('.status').val();
            var orginprice = $(this).find('.orginprice').val();
            var minnum = $(this).find('.minnum').val();
            var tips = $(this).find('.tips').val();
            if( specname=='' && price=='' &&nums=='' &&limitnum==''){
                issubmit = 0;
                alert("请输入规格信息");
                return false;
            }
            var reg = /^(0|[1-9][0-9]{0,9})(\.[0-9]{1,2})?$/;
            var numsreg = /^[0-9]+$/;
            var numsreg1 = /^[0-9]+$/;
            if(specname==''&& spec==1){
                issubmit = 0;
                alert("请输入规格名称");
                return false;
            } else if (specname.length>20) {
                issubmit = 0;
                alert("规格名称最大为20字");
                return false;
            } else if ( price == '') {
                issubmit = 0;
                alert("请输入价格");
                return false;
            } else if (price!=''&& !reg.test(price)) {
                issubmit = 0;
                alert("请输入正确的价格,可支持精确到分");
                return false;
            } else if (nums == '') {
                issubmit = 0;
                alert("请输入库存");
                return false;
            } else if (!numsreg.test(nums)) {
                issubmit = 0;
                alert("请输入库存为大于0的整数");
                return false;
            } else if (limitnum=='' && limittype>1) {
                issubmit = 0;
                alert("请输入限购份数");
                return false;
            } else if (!numsreg1.test(limitnum) && limittype>1) {
                issubmit = 0;
                alert("请输入限购份数为大于0的整数");
                return false;
            } else if (orginprice && (!reg.test(orginprice) || orginprice <=0)) {
                issubmit = 0;
                alert("请输入正确的市场价,且必须大于0");
                return false;
            } else if(!minnum){
                issubmit = 0;
                alert("请填写起订份数");
                return false;
            }else if(!numsreg.test(minnum)|| minnum==0){
                issubmit = 0;
                alert("起订份数需为大于0的整数");
                return false;
            }else if (!tips){
                issubmit = 0;
                alert("tips不能为空");
                return false;
            } else if (tips.length>30) {
                issubmit = 0;
                alert("tips最多30字");
                return false;
            }
            else if (!token) {
                issubmit = 0;
                window.alert('令牌失效，请刷新后重新提交');
                return false;
            } else {
                var temp ='specname:'+specname+'+-price:'+price+'+-nums:'+nums+'+-limittype:'+limittype+'+-limitnum:'+limitnum+'+-status:'+status+'+-orginprice:'+orginprice+'+-minnum:'+minnum+'+-tips:'+tips;
                specinfo+= temp+'{|}';
            }

        })
        specinfo = specinfo.substr(0,specinfo.length-3);
        /* */
        var orderformat = '';
        if (issubmit) {
            orderformat = getFormatData();
        }
        if (!orderformat) issubmit = 0;
        if (issubmit) {
            $.post(
                "{:U('OperationGoods/saveGoods')}",{
                    name:name,
                    type:type,
                    paystyle:paystyle,
                    spec:spec,
                    specinfo:specinfo,
                    productid:productid,
                    token:token,
                    orderformat:orderformat
                },function (data) {
                    if(data['state']==1){
                        alert(data['msg']);
                        window.location.href="{:U('Operation/OperationGoods/goodsIndex')}?productid={$Think.get.productid}";
                    }else {
                        alert(data['msg']);
                    }
                },'json')
        }

    })

    //自定义下单按钮隐藏或显示

    //文本信息
    function oneText() {
        var str=
            '                <div class="form-group">\n' +
            '                <div class="col-sm-12" style="margin-top: 7px;margin-left:15px">\n' +
            '                <label for="" class=" col-sm-1 control-label">名称</label>\n' +
            '                <div class="col-sm-3">\n' +
            '                <input type="text" class="form-control name" name="" id="" placeholder="4个字以内">\n' +
            '                </div>\n' +
            '                <div class="col-sm-2">\n' +
            '                <select name="type" class="form-control selecttype">\n' +
            '                <option value="1" selected>文本</option>\n' +
            '                <option value="2" >筛选项</option>\n' +
            '                <option value="3">上传图片</option>\n' +
            '                <option value="4">地址</option>\n' +
            '                </select>\n' +
            '                </div>\n' +
            '                <div class="col-sm-2">\n' +
            '                <select name="" class="form-control require">\n' +
            '                <option value="0">是否必填</option>\n' +
            '                <option value="1">必填</option>\n' +
            '                <option value="2">非必填</option>\n' +
            '                </select>\n' +
            '                </div>\n' +
            '                <div class="col-sm-2">\n' +
            '                <select name="" class="form-control numtype">\n' +
            '                <option value="0">填写份数</option>\n' +
            '                <option value="1">1份</option>\n' +
            '                <option value="2">多份</option>\n' +
            '                </select>\n' +
            '                </div>\n' +
            '                </div>\n' +
            '            <img src="__PUBLIC__/Admin/images/u847.png"  class="delButton" alt="点击删除" style="float: right;position: absolute;cursor: pointer;" />\n' +
            '                </div>\n';
        return str;
    }

    // 筛选项信息
    function oneFilter() {
        var str=
            '                <div class="form-group">\n' +
            '                    <div class="col-sm-12" style="margin-top: 7px;margin-left:15px;">\n' +
            '                        <label for="" class=" col-sm-1 control-label">名称</label>\n' +
            '                        <div class="col-sm-3">\n' +
            '                            <input type="text" class="form-control name"  id="" placeholder="4个字以内">\n' +
            '                        </div>\n' +
            '                        <div class="col-sm-2">\n' +
            '                            <select name="type" class="form-control shaixuan selecttype">\n' +
            '                               <option value="1" >文本</option>\n' +
            '                               <option value="2" selected>筛选项</option>\n' +
            '                               <option value="3">上传图片</option>\n' +
            '                                <option value="4">地址</option>\n' +
            '                            </select>\n' +
            '                        </div>\n' +
            '                        <div class="col-sm-2">\n' +
            '                            <select name="" class="form-control require">\n' +
            '                <option value="0">是否必填</option>\n' +
            '                <option value="1">必填</option>\n' +
            '                <option value="2">非必填</option>\n' +
            '                            </select>\n' +
            '                        </div>\n' +
            '                        <div class="col-sm-2">\n' +
            '                            <select name="" class="form-control numtype">\n' +
            '                                <option value="0">填写份数</option>\n' +
            '                                <option value="1">1份</option>\n' +
            '                                <option value="2">多份</option>\n' +
            '                            </select>\n' +
            '                        </div>\n' +
            '                    </div>\n' +
            '                    <img src="__PUBLIC__/Admin/images/u847.png" data-type="filter" class="delButton" alt="点击删除" style="float: right;position: absolute;cursor: pointer;" />\n' +
            '                </div>\n' +
            '<div class="oneselect">\n'+
            '                <div class="form-group xuanxiang">\n' +
            '                    <label for="" class="col-sm-2 control-label " ></label>\n' +
            '                    <div class="col-sm-12">\n' +
            '                        <label for="" class=" col-sm-1 control-label xuanxiangname">选项1</label>\n' +
            '                        <div class="col-sm-3">\n' +
            '                            <input type="text" class="form-control" name="" id="" placeholder="8个字以内">\n' +
            '                        </div>\n' +
            '                        <img src="__PUBLIC__/Admin/images/delsmall.png"  class="delsmall" alt="点击删除" style="position: absolute;margin-left:-16px;top:-1px;cursor: pointer" />\n' +
            '                    </div>\n' +
            '                </div>\n' +
            '                <div class="form-group xuanxiang">\n' +
            '                    <label for="" class="col-sm-2 control-label"></label>\n' +
            '                    <div class="col-sm-12">\n' +
            '                        <label for="" class=" col-sm-1 control-label xuanxiangname">选项2</label>\n' +
            '                        <div class="col-sm-3">\n' +
            '                            <input type="text" class="form-control" name="" id="" placeholder="8个字以内">\n' +
            '                        </div>\n' +
            '                        <img src="__PUBLIC__/Admin/images/delsmall.png"  class="delsmall" alt="点击删除" style="position: absolute;margin-left:-16px;top:-1px;cursor: pointer" />\n' +
            '                    </div>\n' +
            '                </div>\n' +

            '</div>\n' +
            '                <div class="form-group">\n' +
            '                    <label for="" class="col-sm-2 control-label"></label>\n' +
            '                    <div class="col-sm-12">\n' +
            '                        <label for="" class=" col-sm-1 control-label"></label>\n' +
            '                        <div class="col-sm-2">\n' +
            '                            <button type="button" name="addOneOption"   class="btn btn-primary addOneOption" style="width:80px;background:#777;border:0">添加选项</button>\n' +
            '                        </div>\n' +
            '                    </div>\n' +
            '                </div>\n';
        return str;
    }

    //图片信息
    function  oneImages() {
        var str=
            '                               <div class="form-group"> \n' +
            '                                       <div class="col-sm-12" style="margin-top: 7px;margin-left:15px;"> \n' +
            '                                                <label for="" class=" col-sm-1 control-label">名称</label> \n' +
            '                                                <div class="col-sm-3"> \n' +
            '                                                        <input type="text" class="form-control name" name="" id="" placeholder="4个字以内"> \n' +
            '                                                    </div> \n' +
            '                                                <div class="col-sm-2"> \n' +
            '                                                        <select name="type" class="form-control selecttype" > \n' +
            '                                                            <option value="1" >文本</option>\n' +
            '                                                            <option value="2">筛选项</option>\n' +
            '                                                            <option value="3"  selected>上传图片</option>\n' +
            '                                                            <option value="4">地址</option>\n' +
            '                                                            </select> \n' +
            '                                                    </div> \n' +
            '                                                <div class="col-sm-2"> \n' +
            '                                                        <select name="" class="form-control require"> \n' +
            '                <option value="0">是否必填</option>\n' +
            '                <option value="1">必填</option>\n' +
            '                <option value="2">非必填</option>\n' +
            '                                                            </select> \n' +
            '                                                    </div> \n' +
            '                                                <div class="col-sm-2"> \n' +
            '                                                        <select name="" class="form-control numtype"> \n' +
            '                                                                <option value="0">填写份数</option> \n' +
            '                                                                <option value="1">1份</option> \n' +
            '                                                                <option value="2">多份</option> \n' +
            '                                                            </select> \n' +
            '                                                    </div> \n' +
            '                                            </div> \n' +
            '                                        <img src="__PUBLIC__/Admin/images/u847.png"  data-type="images" class="delButton" alt="点击删除" style="float: right;position: absolute;cursor: pointer;" /> \n' +
            '                                    </div> \n' +
            '                                <div class="form-group"> \n' +
            '                                        <label for="" class="col-sm-2 control-label"></label> \n' +
            '                                        <div class="col-sm-12"> \n' +
            '                                                <label for="" class=" col-sm-1 control-label">张数</label>\n' +
            '                                                <div class="col-sm-3">\n' +
            '                                                    <select name="type" class="form-control select" >\n' +
            '                                                        <option value="1">1</option>\n' +
            '                                                        <option value="2" selected>2</option>\n' +
            '                                                        <option value="3">3</option>\n' +
            '                                                        <option value="4">4</option>\n' +
            '                                                    </select>\n' +
            '                                                </div>\n' +
            '                                            </div> \n' +
            '                                    </div> \n' +
            '                                <div class="form-group"> \n' +
            '                                        <label for="" class="col-sm-2 control-label"></label> \n' +
            '                                        <div class="col-sm-12"> \n' +
            '                                                <label for="" class=" col-sm-1 control-label">名称</label>\n' +
            '<div class="pics">\n' +
            '</div>\n'
        '                                        </div>\n' +
        '                                    </div>\n';
        return str
    }

    //添加小图片名称
    function createSmallPic(num) {
        var result = '';
        for (var i=0;i<num; i++) {
            var name = '图'+(i+1);
            result+='<div class="col-sm-2"><input type="text" class="form-control" value="'+name+'" ></div>';
        }
        return result;
    }

    //地址信息
    function oneAddress() {
        var str=
            '                <div class="form-group">\n' +
            '                <div class="col-sm-12" style="margin-top: 7p;margin-left:15px;">\n' +
            '                <label for="" class=" col-sm-1 control-label">文本</label>\n' +
            '                <div class="col-sm-3">\n' +
            '                <input type="text" class="form-control name" name="" id="" placeholder="4个字以内">\n' +
            '                </div>\n' +
            '                <div class="col-sm-2">\n' +
            '                <select name="type" class="form-control selecttype" >\n' +
            '                    <option value="1" >文本</option>\n' +
            '                    <option value="2">筛选项</option>\n' +
            '                    <option value="3"  >上传图片</option>\n' +
            '                   <option value="4" selected>地址</option>\n' +
            '                </select>\n' +
            '                </div>\n' +
            '                <div class="col-sm-2">\n' +
            '                <select name="" class="form-control require">\n' +
            '                <option value="0">是否必填</option>\n' +
            '                <option value="1">必填</option>\n' +
            '                <option value="2">非必填</option>\n' +
            '                </select>\n' +
            '                </div>\n' +
            '                <div class="col-sm-2">\n' +
            '                <select name="" class="form-control numtype" disabled>\n' +
            '                <option value="1" selected>1份</option>\n' +
            '                </select>\n' +
            '                </div>\n' +

            '                </div>\n' +
            '                <img src="__PUBLIC__/Admin/images/u847.png" data-type="address" class="delButton" alt="点击删除" style="float: right;position: absolute;cursor: pointer;" />\n' +
            '                </div>\n';

        return str;
    }

    //添加小选项信息
    function oneSmallPoint(i) {
        var str='<div class="form-group xuanxiang">\n' +
            '                <label for="" class="col-sm-2 control-label "></label>\n' +
            '                <div class="col-sm-12">\n' +
            '                    <label for="" class=" col-sm-1 control-label xuanxiangname">选项'+i+'</label>\n' +
            '                    <div class="col-sm-3">\n' +
            '                        <input type="text" class="form-control" name="" id="" placeholder="8个字以内">\n' +
            '                    </div>\n' +
            '                    <img src="__PUBLIC__/Admin/images/delsmall.png"  class="delsmall" alt="点击删除" style="position: absolute;margin-left:-16px;top:-1px;cursor: pointer" />\n' +
            '                </div>\n' +
            '            </div>';
        return str;

    }

    function onecontainer(elemnt) {
        var str = '<div class="col-sm-10 filter onecon element'+elemnt+'" data-num='+elemnt+' style="border: 1px solid #000;;margin-top:20px;margin-bottom:20px;width:975px;margin-left:180px"></div>';
        return str;
    }

    function addOneText(elemnt) {
        var str ='';
        str=oneText();
        $(''+elemnt).html(str);
    }
    function addFilter(elemnt) {
        var str ='';
        str=oneFilter();
        $(''+elemnt).html(str);
        $(''+elemnt).find('.addOneOption').click(function () {
            console.log(elemnt);
            var i = $(this).parents('.onecon').find('.xuanxiang').length+1;
            $(''+elemnt).find('.oneselect').append(addSmallPoint(i));
        })
    }
    function  addImages(elemnt) {
        var str='';
        str=oneImages();
        $(''+elemnt).html(str);
        var imagestr = createSmallPic(2);
        $(''+elemnt).find('.pics').html(imagestr);
        $(''+elemnt).find('.select').change(function () {
            var num = $(this).val();
            imagestr = createSmallPic(num);
            $(''+elemnt).find('.pics').html(imagestr);
        })
    }

    function addAddress(elemnt) {
        var str='';
        str=oneAddress();
        $(''+elemnt).html(str);
    }

    /*添加一个小选项*/
    function addSmallPoint(i) {
        var str ='';
        str=oneSmallPoint(i);
        return str;
    }

    /*删除一个小选项*/
    $("#selectCondition").on('click','.delsmall', function () {
        var length =  $(this).parents('.onecon').find('.xuanxiang').length;
        if(length>2){
            var oneselect = $(this).parents('.oneselect');
            $(this).parents('.xuanxiang').remove();
            var j = 1;
            console.log(oneselect)
            console.log(oneselect.find('.xuanxiangname'));
            oneselect.find('.xuanxiangname').each(function () {
                console.log(j);
                $(this).text('选项'+j);
                j++;
            })
        }else {
            alert("至少设置2个选项");
        }

    });


    //删除所选项信息
    $("#selectCondition").on('click','.delButton', function () {
        $(this).parent().parent().remove();
    });
    var totalment = 3;
    //默认添加文本

    $('#typeButton').click(function () {
        var onecontainer1 = onecontainer(totalment);
        $('#selectCondition').append(onecontainer1);
        var text = oneText();
        $('.element'+totalment).html(text);
        totalment++;
    })
    $('#selectCondition').on('change','.selecttype',function () {
        var numid =  $(this).parents('.onecon').data('num');
        var type = $(this).val();
        var str = '';
        if (type == 1) {
            addOneText('.element'+numid);  //文本
        } else if (type == 2) {           //筛选
            addFilter('.element'+numid);
        } else if (type ==3) {          //图片
            addImages('.element'+numid)
        } else if (type == 4) {          //地址
            addAddress('.element'+numid);
        }
    })


</script>
</body>
